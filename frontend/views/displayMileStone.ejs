<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mile Stone Records</title>
</head>
<body>
    <h1 style="text-align: center;">Milestone Records</h1>
    <table>
      <thead>
        <tr>
          <th>Milestone Name</th>
          <th>Trimester </th>
          <th>Date of Milestone</th>
          <th>Journal Entry</th>
        </tr>
      </thead>
      <tbody>
          <!-- the less than, percentage sign is for when we are NOT grabbing data-->
        <% if (milestones.length > 0) { %>
          <% milestones.forEach(row => { %>
            <tr>
              <!-- have the primary key which is the id and make it hidden on the page-->
              <input type="hidden" value="row.id"> 
              <td><%= row.description %></td>
              <td><%= row.base_total %></td>
              <!-- put in date bc it came over in a string and then change it to the US style-->
              <td><%= new Date(row.date_created).toLocaleDateString('en-US') %></td> <!-- Format date -->
              <!-- ? is an inline if statement (the book talks about it)-->
              <td><%= row.active_poke ? 'Yes' : 'No' %></td>
              <td><%= row.gender %></td>
              <td><%= row.poke_type_description %></td>
              <td>
                  <!-- each of the buttons have their own form so that they can be called one at a time 
                  and so that when they are clicked they will call a different route-->
  
                <form action="/editMileStone/<%= row.id %>" method="GET" style="display:inline;">
                  <button type="submit">Edit</button>
                </form>
                <form action="/deleteMileStone/<%= row.id %>" method="POST" style="display:inline;">
                  <button type="submit" onclick="return confirm('Are you sure you want to delete this record?');">Delete</button>
                </form>
              </td>
            </tr>
          <% }) %>
        <% } else { %>
          <tr>
            <td colspan="4">No data available</td>
          </tr>
        <% } %>
      </tbody>
    </table>
    <form action="/addPoke" method="GET" style="display: flex; justify-content: center; margin: 20px 0;">
      <button type="submit">Add</button>
    </form>
</body>
</html>